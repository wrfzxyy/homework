<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="less/6.css">
</head>

<body>
  <div id="box">
    <!-- box是可视窗口 -->
    <ul class='list'>
      <!-- ul 是一个长条 -->
      <li>
        111
        <img src="https://cms-bucket.ws.126.net/2020/0227/f8e3f9e3j00q6cu9c0062c000go006yc.jpg" alt="">
      </li>
      <li>
        222
        <img src="https://cms-bucket.ws.126.net/2020/0306/9084f041j00q6rqcl00l2c000go006yc.jpg" alt="">
      </li>
      <li>
        333
        <img src="https://cms-bucket.ws.126.net/2020/0227/e986cfd0j00q6cu4v001hc000go006yc.jpg" alt="">
      </li>>
      <li>
        444
        <img src="https://cms-bucket.ws.126.net/2020/0218/2f1f019fj00q5w7pw008sc000go006yc.jpg" alt="">
      </li>>
      <li>
        555
        <img src="http://cms-bucket.ws.126.net/2020/0421/e93e2200p00q94okl00mpc000s600e3c.png" alt="">
      </li>>
      <li>
        666
        <img src="https://cms-bucket.ws.126.net/2020/0227/f8e3f9e3j00q6cu9c0062c000go006yc.jpg" alt="">
      </li>>
    </ul>
    <ul id='btn'>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
    <div class="btn_box">
      <div class="left_btn">
        < </div>
          <div class="right_btn"> > </div>
      </div>
    </div>
    <script>
      let ul = document.querySelector('ul');
      let start = 0;
      let box = document.querySelector('#box');
      let timer = null;
      let btn_box = document.querySelector('.btn_box')
      let leftBtn = document.querySelector('.left_btn'),
        rightBtn = document.querySelector('.right_btn');
      function move() {
        timer = setInterval(() => {
          start -= 600;
          if (start < -3000) {
            start = 0;
            ul.style.transition = 'none'
            ul.style.transform = `translateX(${start}px)`;
            let l = ul.offsetHeight;
            start = -600;
            ul.style.transition = 'all 0.3s'

          } else {
            ul.style.transition = 'all 0.3s'
          }
          ul.style.transform = `translateX(${start}px)`;
        }, 1500);
      };
      move()

      box.onmouseenter = function () {
        clearInterval(timer);
        btn_box.style.display = 'block';
      }
      box.onmouseleave = function () {
        move();
        btn_box.style.display = 'none';
      }

      let banner_item = ul.children;

      leftBtn.onclick = function () {
        start -= 600;
      
     
      }

      rightBtn.onclick = function () {
        start -= 600;
        if (start < -3000) {
            start = 0;
            ul.style.transition = 'none';
            ul.style.transform = `translateX(${start}px)`;
            let l = ul.offsetLeft;//读写分离，到这边就重现渲染一次，读取操作会让浏览器重新渲染
            start -= 600;
            ul.style.transition = 'all 0.3s';
        } else {
            ul.style.transition = 'all 0.3s';
        }
        ul.style.transform = `translateX(${start}px)`;
    };
    leftBtn.onclick = function () {
        start += 600;
        console.log(start);

        if (start === 0) {
            start = -3600;
            ul.style.transition = 'none';
            ul.style.transform = `translateX(${start}px)`;
            let l = ul.offsetLeft;
            start += 600;
            ul.style.transition = 'all 0.3s';
        } else {
            ul.style.transition = 'all 0.3s';
        }
        ul.style.transform = `translateX(${start}px)`;
    }
    
    let btns=document.querySelectorAll('#btn li');
    [].forEach.call(btns,(item,index)=>{
      item.onclick=function(){
        ul.style.transform = `translateX(${index*(-600)}px)`;
        
      }
    })



    </script>
</body>

</html>